{% extends "base.html" %}
{% load bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% load bootstrap_icons %}
{% load static %}

{% block page_content %}
<div class="included-content">
  {% include 'progress.html' %}
</div>

<h1>Create a {{ add_type }}{% if owning_user%} as the user {{ owning_user.email}}{% endif %}</h1>

{% if error_message %}
    <p><strong>{{ error_message }}</strong></p>
{% endif %}
<form method="post" action="" enctype='multipart/form-data'>
    {% csrf_token %}
    <div>
      <b>Title:*</b><br/>
      {{form.title}}
    </div>
    <div>
      <b>Group:</b><br/>
      {{form.group}}
    </div>
    <div class="row">
      <div class="col-auto languoids">
          <b>Language:*</b><br/>
          {{form.languoids}}
      </div>
      <div class="col-auto other_languoid" style="display: none;">
          <b>Other language:</b><br/>
          {{form.other_languoid}}
      </div>
    </div>
    <div>
      <b>Category:*</b><br/>
      {{form.category}}
    </div>
    <div>
      <b>Grade range:*</b><br/>
      {{form.grade_range}}
    </div>
    <div>
      <b>Individual or group:*</b><br/>
      {{form.performance_type}}
    </div>
    <hr />
    <input type="submit" class="btn btn-primary" value="{% if add_type == 'Performance' %}Continue{% else %}Create {{ add_type }}{% endif %}"/>
</form>

<script>
  let instructorsTable = document.querySelector('.instructor-table');
  let studentsTable = document.querySelector('.student-table');
  const languoidsSelect = document.querySelector('#id_languoids');
  const otherLanguoidDiv = document.querySelector('.other_languoid');

  class App {
      constructor() {
      
        languoidsSelect.addEventListener('change', this._toggleOtherLanguoid.bind(this));

      }

      _toggleOtherLanguoid(){
        const selectedOptions = Array.from(languoidsSelect.selectedOptions);
        const otherIsSelected = selectedOptions.some(function(option) {
            return option.text === 'Other';
        });

        if (otherIsSelected) {
            // Show the other_languoid div when "Other" is selected
            otherLanguoidDiv.style.display = 'block';
        } else {
            // Hide the other_languoid div when "Other" is not selected
            otherLanguoidDiv.style.display = 'none';
        }
      }



  }
  const app = new App();
  </script>

{% endblock %}
